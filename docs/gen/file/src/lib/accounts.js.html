<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/lib/accounts.js | aion-web3</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="web3-compatible api for working with aion"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="aion-web3"><meta property="twitter:description" content="web3-compatible api for working with aion"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/aionnetwork/aion_web3.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/lib/accounts.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">let {isString, isEmpty, isArray} = require(&apos;underscore&apos;)
let patterns = require(&apos;./patterns&apos;)
let values = require(&apos;./values&apos;)
let {blake2b256, keccak256} = require(&apos;./crypto&apos;)
let {
  prependZeroX,
  removeLeadingZeroX,
  hexToBuffer,
  randomHexBuffer,
  Buffer,
  toBuffer
} = require(&apos;./formats&apos;)

function createPrivateKey(entropy) {
  if (isEmpty(entropy) === true) {
    entropy = randomHexBuffer()
  }
  let pk = keccak256(Buffer.concat([randomHexBuffer(), entropy]))
  pk = hexToBuffer(pk)
  pk = keccak256(Buffer.concat([randomHexBuffer(), pk]))
  pk = hexToBuffer(pk)
  return pk
}

let isPrivateKey = val =&gt;
  (isArray(val) === true || Buffer.isBuffer(val) === true) &amp;&amp; val.length &gt; 0

function createA0Address(privateKey) {
  let pkHash = Buffer.from(blake2b256(privateKey))
  return Buffer.concat([values.addresses.identifier, pkHash], 32)
}

let createA0AddressString = val =&gt; prependZeroX(val.toString(&apos;hex&apos;))

function isAccountAddress(val) {
  if (isEmpty(val) === true || isString(val) === false) {
    return false
  }

  return patterns.address.test(val) === true
}

function createChecksumAddress(val) {
  let address = removeLeadingZeroX(val)
  let addressHash = keccak256(toBuffer(address.toLowerCase())).toString(&apos;hex&apos;)

  return prependZeroX(
    addressHash
      .split(&apos;&apos;)
      .map(item =&gt; parseInt(item, 16))
      .map((item, index) =&gt; {
        let char = address[index]
        if (isNaN(char) === false) {
          // numeric
          return char
        }
        return item &gt; 7 ? char.toUpperCase() : char.toLowerCase()
      })
      .join(&apos;&apos;)
  )
}

let isValidChecksumAddress = val =&gt; val === createChecksumAddress(val)

function equalAddresses(addr1, addr2) {
  return (
    removeLeadingZeroX(addr1.toLowerCase()) ===
    removeLeadingZeroX(addr2.toLowerCase())
  )
}

module.exports = {
  createPrivateKey,
  isPrivateKey,
  createA0Address,
  createA0AddressString,
  isAccountAddress,
  createChecksumAddress,
  isValidChecksumAddress,
  equalAddresses
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
