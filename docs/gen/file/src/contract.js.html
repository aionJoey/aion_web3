<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/contract.js | aion-web3</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="web3-compatible api for working with aion"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="aion-web3"><meta property="twitter:description" content="web3-compatible api for working with aion"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/aionnetwork/aion_web3.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/contract.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">let {EventEmitter} = require(&apos;events&apos;)
let {isObject} = require(&apos;underscore&apos;)
let {
  inputLogFormatter,
  inputCallFormatter,
  inputDefaultBlockNumberFormatter,
  inputTransactionFormatter
} = require(&apos;./formatters&apos;)
let {assignExtend} = require(&apos;./extend&apos;)
let {hexToNumber} = require(&apos;./utils&apos;)
// let {jsonInterfaceValidator} = require(&apos;./lib/contracts&apos;)

let methods = [
  {
    name: &apos;getPastLogs&apos;,
    call: &apos;eth_getLogs&apos;,
    params: 1,
    inputFormatter: [inputLogFormatter]
    // outputFormatter: this._decodeEventABI.bind(subOptions.event)
  },
  {
    name: &apos;estimateGas&apos;,
    call: &apos;eth_estimateGas&apos;,
    params: 1,
    inputFormatter: [inputCallFormatter],
    outputFormatter: hexToNumber
    // requestManager: _this._parent._requestManager,
    // accounts: ethAccounts // is eth.accounts (necessary for wallet signing)
    // defaultAccount: _this._parent.defaultAccount,
    // defaultBlock: _this._parent.defaultBlock
  },
  {
    name: &apos;call&apos;,
    call: &apos;eth_call&apos;,
    params: 2,
    inputFormatter: [inputCallFormatter, inputDefaultBlockNumberFormatter]
    // add output formatter for decoding
    /*outputFormatter: function(result) {
      return _this._parent._decodeMethodReturn(_this._method.outputs, result)
    },*/
    // requestManager: _this._parent._requestManager,
    // accounts: ethAccounts, // is eth.accounts (necessary for wallet signing)
    // defaultAccount: _this._parent.defaultAccount,
    // defaultBlock: _this._parent.defaultBlock
  },
  {
    name: &apos;sendTransaction&apos;,
    call: &apos;eth_sendTransaction&apos;,
    params: 1,
    inputFormatter: [inputTransactionFormatter]
    // requestManager: _this._parent._requestManager,
    // accounts: _this.constructor._ethAccounts || _this._ethAccounts, // is eth.accounts (necessary for wallet signing)
    // defaultAccount: _this._parent.defaultAccount,
    // defaultBlock: _this._parent.defaultBlock,
    // extraFormatters: extraFormatters
  }
]

function Contract(jsonInterface, address, options) {
  EventEmitter.call(this)
  assignExtend(this, {methods})

  /*let [valid, errors] = jsonInterfaceValidator(jsonInterface)

  console.log(&apos;valid&apos;, valid)
  console.log(&apos;errors&apos;, errors)*/

  if (isObject(address) === true) {
    this.options = address
  }

  this.address = address || null
  this.options = options || {}

  /*

  allow users to automatically tack on their own methods

  */

  /*let handler = {
    get(target, name) {
      function contractMethod(args) {}
    }
  }

  this.methods = new Proxy(this, handler)*/
}

Contract.prototype = Object.create(EventEmitter.prototype)

module.exports = Contract
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
